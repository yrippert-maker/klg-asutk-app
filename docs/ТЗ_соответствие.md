# Соответствие проекта техническому заданию

## Общая информация

**Функциональная задача:** «Контроль лётной годности воздушных судов» (ФЗ «КЛГ» АСУ ТК)  
**Заказчик:** АО «REFLY»  
**Вариант развертывания:** в составе АСУ ТК

## Платформенные решения АСУ ТК

### 1. ЦХД АСУ ТК (Центральное хранилище данных)
- **Реализация:** PostgreSQL
- **Расположение:** `backend/app/db/`
- **Статус:** ✅ Реализовано базовое хранилище с выделенными таблицами под КЛГ

### 2. П-ИВ АСУ ТК (Протокол интеграции и взаимодействия)
- **Реализация:** Модуль `backend/app/integration/piv.py`
- **Функции:**
  - `push_event()` - отправка событий в П-ИВ
  - Журналирование интеграционных процессов
- **Статус:** ✅ Реализована заглушка, требуется уточнение контрактов

### 3. АСУ ТК-ИБ (Информационная безопасность)
- **Реализация:** Модуль `backend/app/services/security.py`
- **Функции:**
  - OIDC/JWT валидация
  - JWKS проверка подписи токенов
  - Маппинг claim'ов пользователей
- **Статус:** ✅ Реализована базовая авторизация, требуется уточнение маппинга claim'ов

### 4. Информационный портал
- **Реализация:** React приложение в `frontend/`
- **Статус:** ✅ Реализован базовый UI, готов к интеграции как единая точка входа

## Реализованные функции

### ✅ Базовые функции
- Управление организациями (операторы, MRO, органы власти)
- Управление воздушными судами и типами ВС
- Процесс заявок на сертификацию организации по ТО
- Система уведомлений
- Загрузка и управление вложениями
- Логирование интеграционных процессов

### ✅ Модели данных согласно формам ТЗ

#### Реализовано:
1. **MaintenanceTask** - Статус выполненного технического обслуживания
2. **LimitedLifeComponent** - Статус компонентов с ограниченным межремонтным ресурсом/сроком службы (LLP, HT)
3. **LandingGearComponent** - Комплектующие изделия с ограниченным ресурсом (шасси)
4. **DamageReport** - Отчет по ремонтам и повреждениям конструкции
5. **DefectReport** - Отчет по дефектам

#### Требует реализации API:
- Endpoints для работы с моделями технического обслуживания
- Endpoints для работы с отчетами о дефектах и повреждениях
- Валидация данных согласно формам ТЗ

## Требования ТЗ, требующие дальнейшей реализации

### 1. Дополнительные процессы
- [ ] ДЛГ (Документ лётной годности)
- [ ] КД (Контрольные данные)
- [ ] Модификации воздушных судов
- [ ] Инспекции
- [ ] Полный цикл контроля технического обслуживания

### 2. Интеграции
- [ ] Уточнение контрактов П-ИВ (форматы сообщений, расписания, ETL-pipeline)
- [ ] Подключение П-НСИ (централизованная НСИ)
- [ ] Интеграция с внешними системами

### 3. Безопасность
- [ ] Полная ролевая модель согласно АСУ ТК-ИБ
- [ ] Матрица прав доступа
- [ ] Реализация требований к защите информации от НСД

### 4. Документация и тестирование
- [ ] ПМИ (Программно-методические инструкции)
- [ ] Автотесты согласно процедурам приемки
- [ ] Документация по API

## Структура соответствия

```
backend/app/
├── models/
│   ├── maintenance.py      # Модели ТО (соответствует формам ТЗ)
│   ├── defects.py          # Модели дефектов (соответствует формам ТЗ)
│   └── ...
├── integration/
│   └── piv.py              # П-ИВ интеграция
└── services/
    └── security.py         # АСУ ТК-ИБ авторизация
```

## Примечания

- Все модели данных соответствуют формам, указанным в ТЗ
- API endpoints для новых моделей требуют реализации
- Требуется уточнение контрактов интеграций с платформенными решениями АСУ ТК
